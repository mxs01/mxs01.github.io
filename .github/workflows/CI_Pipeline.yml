name: CI Pipeline

on: push

jobs:
  linter:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout Github Repo
      uses: actions/checkout@v4
    - name: Install modules
      run: npm install
    - name: Formatter
      run: ./node_modules/.bin/prettier "src/**/*.{js,ts,jsx,tsx,json}" --write
    - name: Run ESLint
      run: ./node_modules/.bin/eslint . -c eslint.config.js --fix
    - name: Deploy with gh-pages
      run: |
            git remote set-url origin https://git:${GITHUB_TOKEN}@github.com/${GITHUB_REPOSITORY}.git
            npx gh-pages -d build -u "github-actions-bot <support+actions@github.com>"
      env:
            GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
  
